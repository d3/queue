(function(){function n(n){function t(){for(;o=f.length>i&&n>p;){var u=i++,t=f[u],r=l.call(t,1);r.push(e(u)),++p,t[0].apply(null,r)}}function e(n){return function(u,l){--p,null==d&&(null!=u?(d=u,i=s=0/0,r()):(f[n]=l,--s?o||t():r()))}}function r(){null!=d?m(d):a?m(d,f):m.apply(null,[d].concat(f))}var o,a,c={},f=[],i=0,p=0,s=0,d=null,m=u;return n||(n=1/0),c.defer=function(){return d||(f.push(arguments),++s,t()),c},c.map=function(n,u){for(var t=l.call(arguments,2),e=0;u.length>e;e++)c.defer.apply(c,[n,u[e]].concat(t));return c},c.await=function(n){return m=n,a=!1,s||r(),c},c.awaitAll=function(n){return m=n,a=!0,s||r(),c},c}function u(){}"undefined"==typeof module?self.queue=n:module.exports=n,n.version="1.0.3";var l=[].slice})();